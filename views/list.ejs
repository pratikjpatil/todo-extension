<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>To Do List</title>
  <link rel="stylesheet" href="css/styles.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
</head>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>

<body class="allcontent">
  <div class="container">
    <div class="box" id="heading">
      <h1 style="color: #fff;">
        <%= listTitle %>
      </h1>
    </div>
    <div class="newlist">
      <form class="" action="/customroute" method="post">
        <input type="text" name="newListInput" value="" placeholder="Create new list here..." class="newlistBtn">
        <button class="plusebtn" type="submit" name="createNewList">+</button>
      </form>
      <form action="/showList/db" method="post">
        <button id="showDB" class="animated-button" type="submit">DB</button>
      </form>
    </div>

    <div class="box">
      <% newListItems.forEach(function(item){ %>
        <form action="/delete" method="post">
          <div class="item">
            <input type="checkbox" name="checkbox" value="<%= item._id %>" onChange="this.form.submit()">
            <div class="nameAndTime">
              <p>
                <%= item.name %>
              </p>
              <div class="time">
                <% if(item.time && item.time2){ %>
                  <p>
                    <%= new Date(item.time).toLocaleTimeString() %>
                  </p>
                  <p>to</p>
                  <p>
                    <%= new Date(item.time2).toLocaleTimeString() %>
                  </p>
                  <% } %>
              </div>
            </div>
          </div>
          <input type="hidden" name="listName" value="<%= listTitle %>">
        </form>
        <% }) %>

          <form class="item" action="/create" method="post">
            <input type="text" name="newItem" placeholder="New Item" autocomplete="off">
            <input type="datetime-local" name="newTime1" placeholder="" autocomplete="off">
            <input type="datetime-local" name="newTime2" placeholder="" autocomplete="off">
            <button class="btn-newtodo" type="submit" name="list" value="<%= listTitle %>">+</button>
          </form>
    </div>

    <div class="mx-auto text-center">
      <form class="item" action="/AddExtension/Extension" method="get">
        <button class="button-extension" type="submit">Add Extension</button>
      </form>
    </div>
  </div>
</body>
<%- include("footer") -%>